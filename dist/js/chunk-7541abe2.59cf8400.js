(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7541abe2"],{6886:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),r={class:"container mt-5"},d=Object(o["createVNode"])("div",{class:"d-flex justify-content-between align-content-center mb-3"},[Object(o["createVNode"])("h1",{class:"h3 text-uppercase m-0"}," All Orders ")],-1),c={class:"card product-card border border-gray-600 rounded-0"},s={class:"card-body bg-gray-700"},l={class:"table table-hover mt-4"},i=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"table-title-hk text-start",width:"80"},"Order No."),Object(o["createVNode"])("th",{class:"table-title-hk text-start"},"id"),Object(o["createVNode"])("th",{class:"table-title-hk text-start"},"Date"),Object(o["createVNode"])("th",{class:"table-title-hk text-start"},"Payment Status"),Object(o["createVNode"])("th",{class:"table-title-hk text-end",width:"80"},"Edit"),Object(o["createVNode"])("th",{class:"table-title-hk text-end",width:"80"},"Delete")])],-1),n={id:"productList"},m={class:"text-start"},u={class:"text-start",width:"120"},b={class:"text-start",width:"120"},p={class:"text-start",width:"120"},O={class:"text-end"},h=Object(o["createVNode"])("i",{class:"material-icons"},"edit",-1),j={class:"text-end"},f=Object(o["createVNode"])("i",{class:"material-icons"},"close",-1);function N(e,t,a,N,V,g){var v=Object(o["resolveComponent"])("Pagination"),y=Object(o["resolveComponent"])("OrderModal"),k=Object(o["resolveComponent"])("DeleteModal");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",r,[d,Object(o["createVNode"])("div",c,[Object(o["createVNode"])("div",s,[Object(o["createVNode"])("table",l,[i,Object(o["createVNode"])("tbody",n,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(V.orders,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",m,Object(o["toDisplayString"])(e.num),1),Object(o["createVNode"])("td",u,Object(o["toDisplayString"])(e.id),1),Object(o["createVNode"])("td",b,Object(o["toDisplayString"])(V.convertedDate[t]),1),Object(o["createVNode"])("td",p,Object(o["toDisplayString"])(e.is_paid),1),Object(o["createVNode"])("td",O,[Object(o["createVNode"])("button",{type:"button",id:"editOrder",class:"btn btn-light btn-outline-primary","data-id":e.id,onClick:function(e){return g.openModal("editOrder",t)}},[h],8,["data-id","onClick"])]),Object(o["createVNode"])("td",j,[Object(o["createVNode"])("button",{type:"button",id:"removeProduct",class:"btn btn-light btn-outline-primary","data-action":"remove","data-id":e.id,onClick:function(e){return g.openModal("deleteOrder",t)}},[f],8,["data-id","onClick"])])])})),128))])])])])]),Object(o["createVNode"])(v,{page:V.paginationData,onGetData:g.getOrders},null,8,["page","onGetData"]),Object(o["createVNode"])(y,{ref:"OrderModal",temp:V.temp,date:V.tempDate,"modal-type":V.modalType,onSuccessAlert:g.successAlert},null,8,["temp","date","modal-type","onSuccessAlert"]),Object(o["createVNode"])(k,{ref:"DeleteOrderModal",temp:V.temp,"modal-type":V.modalType,onGetData:g.getOrders},null,8,["temp","modal-type","onGetData"])],64)}a("d81d"),a("99af");var V=a("29e4"),g=(a("b0c0"),{class:"modal fade",ref:"OrderModal",tabindex:"-1","aria-labelledby":"OrderModalLabel","aria-hidden":"true"}),v={class:"modal-dialog modal-form modal-dialog-centered modal-dialog-scrollable"},y={class:"modal-content backend-modal-content bg-body"},k={class:"modal-header form-modal-header"},C=Object(o["createVNode"])("h2",{class:"h3"}," Edit Order ",-1),w=Object(o["createVNode"])("i",{class:"material-icons"},"close",-1),x={class:"modal-body product-modal-body"},D=Object(o["createVNode"])("div",{class:"modal-title-hk text-start"}," Order Summary ",-1),M={class:"modal-title-hk text-start"},S={class:"modal-title-hk text-start"},T={class:"modal-title-hk text-start mb-5"},P=Object(o["createVNode"])("div",{class:"modal-title-hk text-end"}," *Compulsory fields ",-1),U={class:"input-group mb-3"},L=Object(o["createVNode"])("label",{for:"customerName",class:"modal-title-hk product-modal-title mb-2"},"Customer Name*",-1),A={class:"input-group mb-3"},B=Object(o["createVNode"])("label",{for:"customerEmail",class:"modal-title-hk product-modal-title mb-2"},"Customer Email*",-1),E={class:"input-group mb-3"},$=Object(o["createVNode"])("label",{for:"customerPhone",class:"w-100 mb-2"},"Phone*",-1),F={class:"input-group mb-3"},J=Object(o["createVNode"])("label",{for:"customerAddress",class:"modal-title-hk product-modal-title mb-2"},"Customer Address*",-1),_={class:"input-group mb-3"},G=Object(o["createVNode"])("label",{for:"customerMsg",class:"modal-title-hk product-modal-title mb-2"},"Customer message",-1),q=Object(o["createVNode"])("label",{for:"isPaid",class:"modal-title-hk product-modal-title mb-2 text-start"},"Payment Status",-1),I={class:"input-group form-check form-switch d-flex align-items-center mb-3"},Y={class:"form-check-label modal-title-hk ml-2",for:"wetCleaning"},z={class:"modal-footer product-modal-footer"},H={key:0,class:"spinner-grow spinner-grow-sm me-2",role:"status"},K=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),Q=Object(o["createTextVNode"])(" Update Order ");function R(e,t,a,r,d,c){var s=Object(o["resolveComponent"])("Field"),l=Object(o["resolveComponent"])("ErrorMessage"),i=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])("div",g,[Object(o["createVNode"])("div",v,[Object(o["createVNode"])("div",y,[Object(o["createVNode"])("div",k,[C,Object(o["createVNode"])("button",{type:"button",class:"btn p-0","aria-label":"Close",onClick:t[1]||(t[1]=function(){return c.closeModal&&c.closeModal.apply(c,arguments)})},[w])]),Object(o["createVNode"])("div",x,[Object(o["createVNode"])(i,{id:"productForm",onSubmit:t[9]||(t[9]=function(e){return c.updateOrder(d.orderTemp.id)})},{default:Object(o["withCtx"])((function(e){var r=e.errors;return[D,Object(o["createVNode"])("div",M," Order No."+Object(o["toDisplayString"])(d.orderTemp.num),1),Object(o["createVNode"])("div",S," Order Date "+Object(o["toDisplayString"])(a.date),1),Object(o["createVNode"])("div",T," Order id "+Object(o["toDisplayString"])(d.orderTemp.id),1),P,Object(o["createVNode"])("div",U,[L,Object(o["createVNode"])(s,{id:"customerName",type:"text",name:"Customer Name",class:["form-control w-100",{"is-invalid":r["Customer Name"]}],"aria-label":"Customer Name input","aria-describedby":"customerNameLabel",rules:"required",modelValue:d.orderUser.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.orderUser.name=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(l,{name:"Customer Name",class:"invalid-feedback"})]),Object(o["createVNode"])("div",A,[B,Object(o["createVNode"])(s,{id:"customeEmail",type:"text",name:"Customer Email",class:["form-control w-100",{"is-invalid":r["Customer Email"]}],"aria-label":"Customer Email input","aria-describedby":"customerEmailLabel",rules:"email|required",modelValue:d.orderUser.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.orderUser.email=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(l,{name:"Customer Email",class:"invalid-feedback"})]),Object(o["createVNode"])("div",E,[$,Object(o["createVNode"])(s,{id:"customerPhone",name:"Phone",type:"tel",placeholder:"852-98765432","aria-label":"Customer phone input",class:["form-control w-100",{"is-invalid":r["Phone"]}],rules:c.isPhone,modelValue:d.orderUser.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return d.orderUser.tel=e})},null,8,["class","rules","modelValue"]),Object(o["createVNode"])(l,{name:"Phone",class:"invalid-feedback"})]),Object(o["createVNode"])("div",F,[J,Object(o["createVNode"])(s,{id:"customerAddress",type:"text",name:"Customer Address",class:["form-control w-100",{"is-invalid":r["Customer Address"]}],"aria-label":"Customer Address input","aria-describedby":"customerAddressLabel",rules:"required",modelValue:d.orderUser.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return d.orderUser.address=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(l,{name:"Customer Address",class:"invalid-feedback"})]),Object(o["createVNode"])("div",_,[G,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{id:"customerMsg",name:"Description",as:"textarea",class:"form-control w-100",rows:"5",placeholder:"Please type the order message","aria-label":"Customer message","aria-describedby":"customerMessageLabel","onUpdate:modelValue":t[6]||(t[6]=function(e){return d.orderTemp.message=e})},null,512),[[o["vModelText"],d.orderTemp.message]])]),q,Object(o["createVNode"])("div",I,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"isPaid",type:"checkbox",class:"form-check-input ","aria-label":"Order Payment Status","aria-describedby":"PaymentStatusLabel","onUpdate:modelValue":t[7]||(t[7]=function(e){return d.orderTemp.is_paid=e})},null,512),[[o["vModelCheckbox"],d.orderTemp.is_paid]]),Object(o["createVNode"])("label",Y,Object(o["toDisplayString"])(d.orderTemp.is_paid?"Paid":"Not paid"),1)]),Object(o["createVNode"])("div",z,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary text-gray-400 rounded-0 btn-md",onClick:t[8]||(t[8]=function(){return c.closeModal&&c.closeModal.apply(c,arguments)})}," Cancel "),Object(o["createVNode"])("button",{type:"submit",class:"btn btn-primary rounded-0 btn-md",disabled:d.isLoading},[d.isLoading?(Object(o["openBlock"])(),Object(o["createBlock"])("div",H,[K])):Object(o["createCommentVNode"])("",!0),Q],8,["disabled"])])]})),_:1})])])])],512)}var W=a("7c2b"),X=a.n(W),Z={props:["temp","date","modalType"],data:function(){return{modal:"",orderTemp:{message:""},orderUser:{},isLoading:!1}},watch:{temp:function(){this.orderTemp=JSON.parse(JSON.stringify(this.temp)),void 0===this.orderTemp.message&&(this.orderTemp.message=""),this.orderUser=this.orderTemp.user}},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()},updateOrder:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("vue3-echohui","/admin/order/").concat(e);this.isLoading=!0,this.$http.put(a,{data:this.orderTemp}).then((function(e){console.log(e),e.data.success?(t.closeModal(),t.$emit("success-alert"),t.isLoading=!1):(alert(e.data.message),t.isLoading=!1)})).catch((function(e){console.log(e)}))},isPhone:function(e){var t=/^[0-9]{3}-[0-9]{8}$/;return!!t.test(e)||"Invalid phone number"}},mounted:function(){this.modal=new X.a(this.$refs.OrderModal,{keyboard:!1,backdrop:"static"})}};Z.render=R;var ee=Z,te=a("1843"),ae={data:function(){return{orders:[],convertedDate:[],paginationData:"",temp:{},tempDate:{},modalType:""}},components:{Pagination:V["a"],OrderModal:ee,DeleteModal:te["a"]},watch:{orders:function(){this.convertedDate=this.orders.map((function(e){return new Date(1e3*e.create_at).toLocaleString("en-US")}))}},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this.$loading.show(),o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("vue3-echohui","/admin/orders?page=").concat(t);this.$http.get(o).then((function(t){t.data.success?(e.orders=t.data.orders,e.paginationData=t.data.pagination):alert(t.data.message),a.hide()})).catch((function(e){console.log(e),a.hide()}))},openModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(this.temp=JSON.parse(JSON.stringify(this.orders[t])),this.tempDate=this.convertedDate[t],this.modalType=e,e){case"editOrder":this.$refs.OrderModal.openModal();break;case"deleteOrder":this.$refs.DeleteOrderModal.openModal();break;default:console.log("Cannot match the modal type")}},successAlert:function(){this.$swal({position:"top-end",icon:"success",iconColor:"#000000",title:"Your order has been saved",showConfirmButton:!1,timer:1500}),this.getOrders()}},mounted:function(){console.clear(),this.getOrders()}};ae.render=N;t["default"]=ae},b0c0:function(e,t,a){var o=a("83ab"),r=a("9bf2").f,d=Function.prototype,c=d.toString,s=/^\s*function ([^ (]*)/,l="name";o&&!(l in d)&&r(d,l,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})},d81d:function(e,t,a){"use strict";var o=a("23e7"),r=a("b727").map,d=a("1dde"),c=d("map");o({target:"Array",proto:!0,forced:!c},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7541abe2.59cf8400.js.map